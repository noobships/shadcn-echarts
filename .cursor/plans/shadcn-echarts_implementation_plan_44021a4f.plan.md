---
name: shadcn-echarts implementation plan
overview: Create a TypeScript package and shadcn/ui registry for Apache ECharts charts styled to match shadcn/ui's design language, with full dark/light mode support and excellent developer experience.
todos:
  - id: setup-project
    content: Initialize pnpm workspace, TypeScript config, and tsdown build setup
    status: completed
  - id: create-theme-system
    content: Build theme system that converts shadcn/ui CSS variables to ECharts themes with dark/light mode support
    status: completed
  - id: build-core-components
    content: Create base Chart component and React wrapper with ECharts integration
    status: pending
  - id: create-chart-components
    content: "Build typed React components for ALL 34+ ECharts chart types (2D: Line, Bar, Pie, Scatter, Area, Map, Candlestick, Radar, Boxplot, Heatmap, Graph, Lines, Tree, Treemap, Sunburst, Parallel, Sankey, Funnel, Gauge, PictorialBar, ThemeRiver, Calendar, Matrix, Chord, Custom; 3D/WebGL: Globe3D, Bar3D, Scatter3D, Surface3D, Map3D, Lines3D, Line3D, ScatterGL, LinesGL, GraphGL)"
    status: pending
  - id: setup-registry
    content: Create shadcn/ui registry structure and registry.json configuration
    status: pending
  - id: create-registry-items
    content: Create registry items for ALL 34+ chart types following shadcn/ui schema - ensure complete coverage with no chart types skipped
    status: pending
  - id: configure-build
    content: Set up tsdown config for multi-format output (ESM/CJS) and package.json exports
    status: pending
  - id: add-documentation
    content: Write comprehensive README, API docs, and usage examples
    status: pending
isProject: false
---

# shadcn-echarts Implementation Plan

## Project Overview

Build a comprehensive TypeScript package that provides Apache ECharts charts styled to match shadcn/ui's minimalistic design language, with seamless dark/light mode support. The package will be available both as an npm package and as a shadcn/ui registry for maximum flexibility.

## Architecture Overview

```
shadcn-echarts/
├── src/
│   ├── core/              # Core ECharts wrapper and theme system
│   ├── themes/            # shadcn/ui-inspired ECharts themes
│   ├── components/        # React components for each chart type
│   ├── hooks/             # React hooks for theme management
│   ├── utils/             # Utility functions
│   └── index.ts           # Main package exports
├── registry/              # shadcn/ui registry items
│   └── [style]/          # Registry items organized by style
├── dist/                  # Built output (tsdown)
├── tsdown.config.ts       # Build configuration
└── package.json
```

## Implementation Phases

### Phase 1: Core Package Setup ✅ COMPLETED

**1.1 Project Initialization** ✅

- ✅ Initialize pnpm workspace
- ✅ Set up TypeScript configuration with strict mode
- ✅ Configure tsdown for library bundling (ESM + CJS formats)
- ✅ Set up package.json with proper exports field (auto-generated by tsdown)
- ✅ Created .gitignore and .npmignore
- Reference: [tsdown getting-started.md](docs/tsdown/guide/getting-started.md), [package-exports.md](docs/tsdown/options/package-exports.md)

**1.2 ECharts Integration** ✅

- ✅ Set up tree-shakeable imports structure
- ✅ Create core wrapper module for ECharts initialization (`src/core/chart.ts`)
- ✅ Add SSR utilities (`src/core/ssr.ts`)
- ✅ Create comprehensive TypeScript types using ComposeOption pattern (`src/core/types.ts`)
- Reference: [ECharts import-echarts.md](docs/echarts/basics/import-echarts.md)

**1.3 Theme System Foundation** ✅

- ✅ Create theme builder utilities based on shadcn/ui color system (`src/themes/builder.ts`)
- ✅ Map shadcn/ui CSS variables (oklch colors) to ECharts theme format
- ✅ Create base theme structure for light and dark modes
- ✅ Implement theme registration system (`src/themes/registry.ts`)
- ✅ Add oklch to hex color conversion
- ✅ Create theme type definitions (`src/themes/types.ts`)
- Reference: [shadcn/ui theming.md](docs/shadcn-ui/get-started/theming.md), [ECharts style.md](docs/echarts/concepts/style.md), [ECharts 6 dark mode](docs/echarts/basics/what's -new/echarts-6-features.md)

**1.4 SSR Support** ✅

- ✅ Implement server-side SVG rendering utilities
- ✅ Add SSR detection helpers
- ✅ Create renderToSVGString functions with theme support

**1.5 React Hooks** ✅

- ✅ Create `useEChartsTheme()` hook for theme detection
- ✅ Implement automatic dark mode detection
- ✅ Add theme change watching functionality

### Phase 2: Theme Development

**2.1 shadcn/ui Theme Mapping**

- Extract color palette from shadcn/ui CSS variables:
  - `--chart-1` through `--chart-5` for series colors
  - `--background`, `--foreground` for chart background/text
  - `--muted`, `--muted-foreground` for secondary elements
  - `--border` for grid lines and borders
  - `--primary`, `--primary-foreground` for emphasis
- Create theme JSON objects for both light and dark modes
- Reference: [shadcn/ui theming.md lines 93-163](docs/shadcn-ui/get-started/theming.md)

**2.2 ECharts Theme Registration**

- Create theme registration system that:
  - Reads CSS variables from DOM (or accepts theme object)
  - Converts oklch colors to hex/rgb for ECharts
  - Registers themes with `echarts.registerTheme()`
  - Supports dynamic theme switching via `chart.setTheme()`
- Reference: [ECharts theme registration](docs/echarts/concepts/style.md#theme), [ECharts 6 dynamic switching](docs/echarts/basics/what's -new/echarts-6-features.md)

**2.3 Theme Builder Integration**

- Research and potentially use [echarts-theme-builder](https://github.com/apache/echarts-theme-builder) for theme generation
- Create automated theme generation from shadcn/ui color tokens
- Generate theme files for distribution

### Phase 3: React Components

**3.1 Core Chart Component**

- Create base `<Chart />` React component that:
  - Accepts ECharts option as prop
  - Handles ECharts instance lifecycle
  - Supports responsive resizing
  - Integrates with theme system
  - Supports both controlled and uncontrolled modes
- Reference: [ECharts chart-container.md](docs/echarts/concepts/chart-container.md)

**3.2 Chart Type Components**

Create typed React components for ALL ECharts chart types. Based on [ECharts examples.md](docs/echarts/examples/examples.md), ECharts provides 34+ chart types that must all be covered:

**2D Chart Types (24 components):**

- `<LineChart />` - Line charts
- `<BarChart />` - Bar charts
- `<PieChart />` - Pie charts
- `<ScatterChart />` - Scatter plots
- `<AreaChart />` - Area charts (line with areaStyle)
- `<MapChart />` / `<GeoChart />` - GEO/Map charts
- `<CandlestickChart />` - Candlestick charts
- `<RadarChart />` - Radar charts
- `<BoxplotChart />` - Boxplot charts
- `<HeatmapChart />` - Heatmap charts
- `<GraphChart />` - Graph/network charts
- `<LinesChart />` - Lines (flow/path) charts
- `<TreeChart />` - Tree charts
- `<TreemapChart />` - Treemap charts
- `<SunburstChart />` - Sunburst charts
- `<ParallelChart />` - Parallel coordinate charts
- `<SankeyChart />` - Sankey diagrams
- `<FunnelChart />` - Funnel charts
- `<GaugeChart />` - Gauge charts
- `<PictorialBarChart />` - Pictorial bar charts
- `<ThemeRiverChart />` - Theme river charts
- `<CalendarChart />` - Calendar charts
- `<MatrixChart />` - Matrix charts
- `<ChordChart />` - Chord diagrams
- `<CustomChart />` - Custom series (renderItem-based)

**3D/WebGL Chart Types (10 components):**

- `<Globe3DChart />` - 3D Globe charts
- `<Bar3DChart />` - 3D Bar charts
- `<Scatter3DChart />` - 3D Scatter charts
- `<Surface3DChart />` - 3D Surface charts
- `<Map3DChart />` - 3D Map charts
- `<Lines3DChart />` - 3D Lines charts
- `<Line3DChart />` - 3D Line charts
- `<ScatterGLChart />` - WebGL Scatter charts
- `<LinesGLChart />` - WebGL Lines charts
- `<GraphGLChart />` - WebGL Graph charts

Each component should:

- Have proper TypeScript types using ECharts' ComposeOption pattern
- Accept chart-specific props with sensible defaults
- Use tree-shakeable ECharts imports (only import required chart types)
- Support theme switching via theme prop or automatic detection
- Handle responsive resizing
- Support all ECharts features (tooltip, legend, dataZoom, etc.)

**Component Organization:**

- Group 2D charts in `src/components/charts/2d/`
- Group 3D/WebGL charts in `src/components/charts/3d/`
- Create index files for easy imports
- Reference: [ECharts examples.md](docs/echarts/examples/examples.md) for complete chart type list

**3.3 Theme Hook**

- Create `useEChartsTheme()` hook that:
  - Detects system dark mode preference
  - Watches for theme changes
  - Returns current theme name
  - Can be used to sync with shadcn/ui theme
- Reference: [ECharts 6 dark mode detection](docs/echarts/basics/what's -new/echarts-6-features.md#3-dark-mode-support)

### Phase 4: TypeScript Types

**4.1 Type Definitions**

- Create comprehensive TypeScript types:
  - Chart component props
  - Theme configuration types
  - Utility function types
- Leverage ECharts' built-in types where possible
- Reference: [ECharts TypeScript types](docs/echarts/basics/import-echarts.md#creating-an-option-type-in-typescript)

**4.2 Type Exports**

- Export all types from main package entry
- Ensure types work with tree-shaking
- Provide type helpers for custom chart options

### Phase 5: shadcn/ui Registry

**5.1 Registry Structure**

- Create `registry/` directory following shadcn/ui conventions
- Organize by style (e.g., `registry/default/`, `registry/new-york/`)
- Each chart type gets its own registry item
- Reference: [shadcn/ui registry getting-started.md](docs/shadcn-ui/registery/getting-started.md)

**5.2 Registry Items**

For ALL 34+ chart types, create registry items:

**2D Chart Registry Items (24 items):**

- `line-chart`, `bar-chart`, `pie-chart`, `scatter-chart`, `area-chart`
- `map-chart`, `geo-chart`, `candlestick-chart`, `radar-chart`, `boxplot-chart`
- `heatmap-chart`, `graph-chart`, `lines-chart`, `tree-chart`, `treemap-chart`
- `sunburst-chart`, `parallel-chart`, `sankey-chart`, `funnel-chart`, `gauge-chart`
- `pictorial-bar-chart`, `theme-river-chart`, `calendar-chart`, `matrix-chart`, `chord-chart`
- `custom-chart`

**3D/WebGL Chart Registry Items (10 items):**

- `globe-3d-chart`, `bar-3d-chart`, `scatter-3d-chart`, `surface-3d-chart`, `map-3d-chart`
- `lines-3d-chart`, `line-3d-chart`, `scatter-gl-chart`, `lines-gl-chart`, `graph-gl-chart`

For each registry item, create:

- Component file in `registry/[style]/[chart-name]/[chart-name].tsx`
- Registry item JSON definition with proper metadata
- Example usage documentation
- Dependencies listed (echarts, required ECharts modules)
- Reference: [registry-item.json.md](docs/shadcn-ui/registery/registery-item.json.md)

**Registry Item Structure:**

```
registry/
├── default/
│   ├── line-chart/
│   │   ├── line-chart.tsx
│   │   └── line-chart.json
│   ├── bar-chart/
│   ├── pie-chart/
│   └── ... (all 34+ chart types)
└── new-york/
    └── ... (same structure)
```

**Important:** Ensure NO chart types are skipped. Cross-reference with [ECharts examples.md](docs/echarts/examples/examples.md) to verify completeness.

**5.3 Registry Configuration**

- Create `registry.json` at root
- Define all registry items with proper metadata
- Set up build script using `shadcn build` command
- Reference: [registry.json.md](docs/shadcn-ui/registery/registery.json.md), [getting-started.md build section](docs/shadcn-ui/registery/getting-started.md#build-your-registry)

**5.4 Registry Dependencies**

- List `echarts` as dependency
- List shadcn/ui base components if needed
- Reference: [registry-item.json dependencies](docs/shadcn-ui/registery/registery-item.json.md#dependencies)

### Phase 6: Build & Distribution

**6.1 tsdown Configuration**

- Configure tsdown for:
  - Multiple entry points (one per chart component)
  - ESM and CJS output formats
  - TypeScript declaration files
  - Tree-shaking support
  - CSS handling (if needed)
- Reference: [tsdown config options](docs/tsdown/options/)

**6.2 Package Configuration**

- Set up package.json with:
  - Proper `exports` field (auto-generated)
  - Peer dependencies (react, echarts)
  - TypeScript types entry
  - Side effects configuration for tree-shaking
- Reference: [tsdown package-exports.md](docs/tsdown/options/package-exports.md)

**6.3 Build Scripts**

- `build`: Build package with tsdown
- `registry:build`: Build registry JSON files
- `dev`: Watch mode for development
- Reference: [tsdown watchmode.md](docs/tsdown/options/watchmode.md)

### Phase 7: Verification & Testing

**7.1 Chart Coverage Verification**

- Create a checklist of all 34+ chart types from [ECharts examples.md](docs/echarts/examples/examples.md)
- Verify each chart type has:
  - React component implementation
  - Registry item created
  - TypeScript types defined
  - Basic example working
- Cross-reference with ECharts official examples to ensure nothing is missed
- Test each chart type in both light and dark modes

**7.2 Component Testing**

- Unit tests for each chart component
- Theme switching tests
- Responsive behavior tests
- Tree-shaking verification (ensure unused charts don't bloat bundle)

### Phase 8: Documentation & Examples

**8.1 Package Documentation**

- README with installation and usage
- API documentation for all 34+ chart components
- Theme customization guide
- Dark mode integration guide
- Complete chart type reference

**8.2 Registry Documentation**

- Usage examples for each chart type
- Integration with shadcn/ui projects
- Theme synchronization guide
- Chart type selection guide

**8.3 Examples**

- Create example components showing:
  - Basic chart usage for each type
  - Theme customization
  - Dark mode integration
  - Advanced configurations
  - Chart combinations

## Developer Experience Features

### Package Usage (npm/pnpm install)

```typescript
// Tree-shakeable imports
import { BarChart } from '@shadcn/echarts'
import { useEChartsTheme } from '@shadcn/echarts/hooks'

// Automatic theme detection
function MyChart() {
  const theme = useEChartsTheme() // 'light' | 'dark'
  return <BarChart data={...} />
}
```

### Registry Usage (shadcn CLI)

```bash
# Install a chart component
npx shadcn@latest add https://your-registry.com/r/bar-chart.json

# Component is added to project with proper imports
```

### Theme Integration

- Automatic detection of shadcn/ui theme via CSS variables
- Seamless dark/light mode switching
- Custom theme support via theme prop
- Reference: [ECharts 6 dynamic theme switching](docs/echarts/basics/what's -new/echarts-6-features.md#2-dynamic-theme-switching)

## Key Technical Decisions

1. **Tree-shaking**: Use ECharts modular imports to keep bundle size small
2. **Theme System**: Convert shadcn/ui CSS variables to ECharts theme format at runtime
3. **Type Safety**: Leverage ECharts' TypeScript types with custom composition
4. **Registry Format**: Follow shadcn/ui registry schema exactly for compatibility
5. **Build Tool**: Use tsdown for fast, simple library bundling
6. **Package Manager**: Use pnpm for efficient dependency management

## Success Metrics

- Package installs cleanly via npm/pnpm
- Registry items install via shadcn CLI without errors
- **ALL 34+ chart types are implemented and available** (verified against ECharts examples)
- Charts automatically match shadcn/ui theme
- Dark/light mode works seamlessly
- Bundle size is optimized via tree-shaking
- TypeScript types are comprehensive and accurate
- Zero runtime dependencies beyond echarts and react
- Complete registry coverage - no chart types missing

## References

- **ECharts Documentation**: [docs/echarts/](docs/echarts/)
- **ECharts Examples (Complete Chart List)**: [docs/echarts/examples/examples.md](docs/echarts/examples/examples.md) - **CRITICAL: Contains all 34+ chart types**
- **ECharts Features**: [docs/echarts/features/features.md](docs/echarts/features/features.md) - Lists all supported chart series
- **shadcn/ui Registry**: [docs/shadcn-ui/registery/](docs/shadcn-ui/registery/)
- **tsdown Documentation**: [docs/tsdown/](docs/tsdown/)
- **ECharts Theme Builder**: https://github.com/apache/echarts-theme-builder
- **ECharts 6 Features**: [docs/echarts/basics/what's -new/echarts-6-features.md](docs/echarts/basics/what's -new/echarts-6-features.md)

## Complete Chart Type List (For Verification)

**2D Charts (24):** Line, Bar, Pie, Scatter, Area, GEO/Map, Candlestick, Radar, Boxplot, Heatmap, Graph, Lines, Tree, Treemap, Sunburst, Parallel, Sankey, Funnel, Gauge, PictorialBar, ThemeRiver, Calendar, Matrix, Chord, Custom

**3D/WebGL Charts (10):** 3D Globe, 3D Bar, 3D Scatter, 3D Surface, 3D Map, 3D Lines, 3D Line, Scatter GL, Lines GL, Graph GL

**Total: 34+ chart types** - All must be implemented as React components and registry items.